<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>Enhanced C#: Loyc.ByteArrayInString Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Enhanced C#
   </div>
   <div id="projectbrief">Language of your choice: library documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceLoyc.html">Loyc</a></li><li class="navelem"><a class="el" href="classLoyc_1_1ByteArrayInString.html">ByteArrayInString</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classLoyc_1_1ByteArrayInString-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Loyc.ByteArrayInString Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Encodes and decodes BAIS (Byte Array In <a class="el" href="namespaceString.html">String</a>) encoding, which preserves runs of ASCII characters unchanged. This encoding is useful for debugging (since ASCII runs are visible) and for conversion of bytes to JSON.  
 <a href="classLoyc_1_1ByteArrayInString.html#details">More...</a></p>
<hr/><b>Source file</b>:<ul>
<li><a href='https://github.com/qwertie/ecsharp/tree/master/Core/Loyc.Essentials/Utilities/ByteArrayInString.cs'>/Core/Loyc.Essentials/Utilities/ByteArrayInString.cs</a></li>
</ul>
<a name="details" id="details"></a><h2 class="groupheader">Remarks</h2>
<div class="textblock"><p>Encodes and decodes BAIS (Byte Array In <a class="el" href="namespaceString.html">String</a>) encoding, which preserves runs of ASCII characters unchanged. This encoding is useful for debugging (since ASCII runs are visible) and for conversion of bytes to JSON. </p>
<p>Arrays encoded with <a class="el" href="classLoyc_1_1ByteArrayInString.html#a10eb578dfe0f0f6b73ee8fbe89f4966c" title="Encodes a byte array to a string with BAIS encoding, which preserves runs of ASCII characters unchang...">ByteArrayInString.Convert(ArraySlice&lt;byte&gt;, bool)</a> tend to be slightly more compact than standard Uuencoding or Base64, and when you use this encoding in JSON with UTF-8, the output is typically also more compact than yEnc since double-byte characters above 127 are avoided. </p>
<p>A BAIS string alternates between runs of "direct" bytes (usually bytes in the ASCII range that are represented as themselves) and runs of a special base-64 encoding. The base-64 encoding is a sequence of 6-bit digits with 64 added to them, except for 63 which is mapped to itself. This is easier and faster to encode and decode than standard Base64 and has an interesting property described below. </p>
<p>A BAIS string begins in ASCII mode and switches to base 64 when the '<b></b>' character is encountered. Base-64 mode ends, returning to ASCII, when a '!' character is encountered. </p>
<p>For example: </p><pre>
  //                    C   a    t       <br  />
  E        A   B   C   D
  var b = new byte[] { 67, 97, 116, 128, 10, 69, 255, 65, 66, 67, 68 };
  Assert.AreEqual(ByteArrayInString.Convert(b), "Cat\b`@iE?tEB!CD");
</pre><p> A byte sequence such as 128, 10, 69, 255 can be encoded in base 64 as illustrated: </p><pre>
             ---128---    ---10----    ---69----  ---255---  
  Bytes:     1000 0000    0000 1010    0100 0101  1111 1111  
  Base 64:   100000   000000   101001    000101   111111   110000
  Encoded: 01100000 01000000 01101001  01000101 01111111 01110000
           ---96--- ---64--- --105---  ---69--- --127--- --112---
              `        @        i         E        ~        p
</pre> <p>An interesting property of this base-64 encoding is that when it encodes bytes between 63 and 126, those bytes appear unchanged at certain offsets (specifically the third, sixth, ninth, etc.) In this example, since the third byte is 'E' (69), it also appears as 'E' in the output. </p>
<p>When viewing BAIS strings, another thing to keep in mind is that runs of zeroes ('\0') will tend to appear as runs of <code>@</code> characters in the base 64 encoding, although a single zero is not always enough to make a <code>@</code> appear. Runs of 255 will tend to appear as runs of <code>?</code>. </p>
<p>There are many ways to encode a given byte array as BAIS. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a10eb578dfe0f0f6b73ee8fbe89f4966c"><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoyc_1_1ByteArrayInString.html#a10eb578dfe0f0f6b73ee8fbe89f4966c">Convert</a> (<a class="el" href="structLoyc_1_1Collections_1_1ArraySlice.html">ArraySlice</a>&lt; byte &gt; bytes, bool allowControlChars=true)</td></tr>
<tr class="memdesc:a10eb578dfe0f0f6b73ee8fbe89f4966c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encodes a byte array to a string with BAIS encoding, which preserves runs of ASCII characters unchanged.  <a href="classLoyc_1_1ByteArrayInString.html#a10eb578dfe0f0f6b73ee8fbe89f4966c">More...</a><br /></td></tr>
<tr class="separator:a10eb578dfe0f0f6b73ee8fbe89f4966c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83ec463b55bddc4d78b162b8813c9896"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structLoyc_1_1Collections_1_1ArraySlice.html">ArraySlice</a>&lt; byte &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoyc_1_1ByteArrayInString.html#a83ec463b55bddc4d78b162b8813c9896">Convert</a> (string s)</td></tr>
<tr class="memdesc:a83ec463b55bddc4d78b162b8813c9896"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes a BAIS string back to a byte array.  <a href="classLoyc_1_1ByteArrayInString.html#a83ec463b55bddc4d78b162b8813c9896">More...</a><br /></td></tr>
<tr class="separator:a83ec463b55bddc4d78b162b8813c9896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab83a3dabc59ccd689f5d0b3c92c2de7d"><td class="memItemLeft" align="right" valign="top"><a id="ab83a3dabc59ccd689f5d0b3c92c2de7d"></a>
static char&#160;</td><td class="memItemRight" valign="bottom"><b>EncodeBase64Digit</b> (int digit)</td></tr>
<tr class="separator:ab83a3dabc59ccd689f5d0b3c92c2de7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0721bb6b7f56ab96d128654b4c9611a5"><td class="memItemLeft" align="right" valign="top"><a id="a0721bb6b7f56ab96d128654b4c9611a5"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>DecodeBase64Digit</b> (char digit)</td></tr>
<tr class="separator:a0721bb6b7f56ab96d128654b4c9611a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a10eb578dfe0f0f6b73ee8fbe89f4966c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10eb578dfe0f0f6b73ee8fbe89f4966c">&#9670;&nbsp;</a></span>Convert() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static string Loyc.ByteArrayInString.Convert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structLoyc_1_1Collections_1_1ArraySlice.html">ArraySlice</a>&lt; byte &gt;&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowControlChars</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Encodes a byte array to a string with BAIS encoding, which preserves runs of ASCII characters unchanged. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allowControlChars</td><td>If true, control characters under 32 are treated as ASCII (except character 8 '<b></b>').</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The encoded string.</dd></dl>
<p>If the byte array can be interpreted as ASCII, it is returned as characters, e.g. <code>Convert(new byte[] { 65,66,67,33 }) == "ABC!"</code>. When non-ASCII bytes are encountered, they are encoded as described in the description of this class. </p>
<p>For simplicity, this method's base-64 encoding always encodes groups of three bytes if possible (as four characters). This decision may unfortunately cut off the beginning of some ASCII runs. </p>

</div>
</div>
<a id="a83ec463b55bddc4d78b162b8813c9896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83ec463b55bddc4d78b162b8813c9896">&#9670;&nbsp;</a></span>Convert() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structLoyc_1_1Collections_1_1ArraySlice.html">ArraySlice</a>&lt;byte&gt; Loyc.ByteArrayInString.Convert </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decodes a BAIS string back to a byte array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td><a class="el" href="namespaceString.html">String</a> to decode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Decoded byte array (use <code>Convert(s).ToArray()</code> if you need a true array).</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 3 2020 16:52:14 for Enhanced C# by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
