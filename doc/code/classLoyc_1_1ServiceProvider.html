<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>Enhanced C#: Loyc.ServiceProvider Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Enhanced C#
   </div>
   <div id="projectbrief">Language of your choice: library documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceLoyc.html">Loyc</a></li><li class="navelem"><a class="el" href="classLoyc_1_1ServiceProvider.html">ServiceProvider</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classLoyc_1_1ServiceProvider-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Loyc.ServiceProvider Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Adds extension methods to modernize .NET's simple built-in service locator.  
 <a href="classLoyc_1_1ServiceProvider.html#details">More...</a></p>
<hr/><b>Source file</b>:<ul>
<li><a href='https://github.com/qwertie/ecsharp/tree/master/Core/Loyc.Essentials/Utilities/IoC.cs'>/Core/Loyc.Essentials/Utilities/IoC.cs</a></li>
</ul>
<a name="details" id="details"></a><h2 class="groupheader">Remarks</h2>
<div class="textblock"><p>Adds extension methods to modernize .NET's simple built-in service locator. </p>
<p>.NET has had a litte-known built-in simple service locator since .NET 1.1 called System.ComponentModel.Design.ServiceContainer, which implements both IServiceContainer and IServiceProvider. IServiceContainer lets you add services (associating a Type object with a factory or a singleton): </p><pre>
interface IServiceContainer {
    void AddService(Type serviceType, object serviceInstance);
    void AddService(Type serviceType, ServiceCreatorCallback callback);
    ...
}
delegate object ServiceCreatorCallback(IServiceContainer container, Type serviceType);
</pre><p>Meanwhile, IServiceProvider is a simple service locator: </p><pre>
public interface IServiceProvider
{
    object GetService(Type serviceType);
}
</pre><p>This class adds three extension methods to make IServiceContainer and IServiceProvider generic, so you can write code like </p><pre>
   var services = new ServiceContainer();
   services.AddService&lt;IFoo&gt;(p =&gt; new Foo());</pre><pre>   // elsewhere in your code...
   IFoo newFoo = services.GetService&lt;IFoo&gt;();
</pre><p>Remember that service locators are generally an antipattern! However, if you have one of those rare, legitimate needs to use one, you should prefer the IServiceProvider interface built into .NET (if it is enough for your needs) so that your lower-level code avoids taking an unnecessary dependency on an IoC framework. </p>
<p>See also: <a href="http://core.loyc.net/essentials/ambient-service-pattern.html">http://core.loyc.net/essentials/ambient-service-pattern.html</a> </p>
<p>Thanks to <a href="http://blog.differentpla.net/blog/2011/12/20/did-you-know-that-net-already-had-an-ioc-container">Roger's blog</a> for the idea of these extension methods. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a1f197fb31409eb4d4b0ded20a4bbce0c"><td class="memItemLeft" align="right" valign="top"><a id="a1f197fb31409eb4d4b0ded20a4bbce0c"></a>
static TInterface&#160;</td><td class="memItemRight" valign="bottom"><b>GetService&lt; TInterface &gt;</b> (this IServiceProvider provider)</td></tr>
<tr class="separator:a1f197fb31409eb4d4b0ded20a4bbce0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e9ca879b16b4f261b55b060b0ddffc5"><td class="memItemLeft" align="right" valign="top"><a id="a9e9ca879b16b4f261b55b060b0ddffc5"></a>
static <a class="el" href="structLoyc_1_1void.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><b>AddService&lt; TInterface &gt;</b> (this IServiceContainer container, Func&lt; IServiceProvider, TInterface &gt; factory)</td></tr>
<tr class="separator:a9e9ca879b16b4f261b55b060b0ddffc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8a206b3933991a4c4d2367802e92789"><td class="memItemLeft" align="right" valign="top"><a id="ac8a206b3933991a4c4d2367802e92789"></a>
static <a class="el" href="structLoyc_1_1void.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><b>RemoveService&lt; TInterface &gt;</b> (this IServiceContainer container)</td></tr>
<tr class="separator:ac8a206b3933991a4c4d2367802e92789"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Dec 22 2020 11:06:29 for Enhanced C# by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
